*** Configuration.smali	2013-11-10 11:53:05.105672320 +0800
--- Configuration.smali	2013-11-10 11:54:24.593674355 +0800
***************
*** 1010,1015 ****
      or-int/lit16 v0, v0, 0x1000
  
      :cond_11
      return v0
  .end method
  
--- 1053,1068 ----
      or-int/lit16 v0, v0, 0x1000
  
      :cond_11
+     iget-object v1, p0, Landroid/content/res/Configuration;->extraConfig:Lmiui/content/res/ExtraConfiguration;
+ 
+     iget-object v2, p1, Landroid/content/res/Configuration;->extraConfig:Lmiui/content/res/ExtraConfiguration;
+ 
+     invoke-virtual {v1, v2}, Lmiui/content/res/ExtraConfiguration;->diff(Lmiui/content/res/ExtraConfiguration;)I
+ 
+     move-result v1
+ 
+     or-int/2addr v0, v1
+ 
      return v0
  .end method
  
***************
*** 1650,1655 ****
  
      iput v1, p0, Landroid/content/res/Configuration;->mcc:I
  
      const/4 v0, 0x0
  
      iput-object v0, p0, Landroid/content/res/Configuration;->locale:Ljava/util/Locale;
--- 1721,1728 ----
  
      iput v1, p0, Landroid/content/res/Configuration;->mcc:I
  
+     invoke-direct {p0}, Landroid/content/res/Configuration;->loadPreOperator()V
+ 
      const/4 v0, 0x0
  
      iput-object v0, p0, Landroid/content/res/Configuration;->locale:Ljava/util/Locale;
***************
*** 1690,1695 ****
  
      iput v1, p0, Landroid/content/res/Configuration;->seq:I
  
      return-void
  .end method
  
--- 1763,1771 ----
  
      iput v1, p0, Landroid/content/res/Configuration;->seq:I
  
+     iget-object v1, p0, Landroid/content/res/Configuration;->extraConfig:Lmiui/content/res/ExtraConfiguration;
+ 
+     invoke-virtual {v1}, Lmiui/content/res/ExtraConfiguration;->setToDefaults()V
      return-void
  .end method
  
***************
*** 2014,2019 ****
      invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;
  
      :cond_0
      const/16 v2, 0x7d
  
      invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(C)Ljava/lang/StringBuilder;
--- 2090,2103 ----
      invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;
  
      :cond_0
+     iget-object v2, p0, Landroid/content/res/Configuration;->extraConfig:Lmiui/content/res/ExtraConfiguration;
+ 
+     invoke-virtual {v2}, Lmiui/content/res/ExtraConfiguration;->toString()Ljava/lang/String;
+ 
+     move-result-object v2
+ 
+     invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
      const/16 v2, 0x7d
  
      invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(C)Ljava/lang/StringBuilder;
***************
*** 2906,2911 ****
      iput v1, p0, Landroid/content/res/Configuration;->seq:I
  
      :cond_18
      return v0
  
      :cond_19
--- 2990,3005 ----
      iput v1, p0, Landroid/content/res/Configuration;->seq:I
  
      :cond_18
+     iget-object v1, p0, Landroid/content/res/Configuration;->extraConfig:Lmiui/content/res/ExtraConfiguration;
+ 
+     iget-object v2, p1, Landroid/content/res/Configuration;->extraConfig:Lmiui/content/res/ExtraConfiguration;
+ 
+     invoke-virtual {v1, v2}, Lmiui/content/res/ExtraConfiguration;->updateFrom(Lmiui/content/res/ExtraConfiguration;)I
+ 
+     move-result v1
+ 
+     or-int/2addr v0, v1
+ 
      return v0
  
      :cond_19
***************
*** 3025,3030 ****
  
      invoke-virtual {p1, v0}, Landroid/os/Parcel;->writeInt(I)V
  
      return-void
  
      :cond_0
--- 3119,3128 ----
  
      invoke-virtual {p1, v0}, Landroid/os/Parcel;->writeInt(I)V
  
+     iget-object v0, p0, Landroid/content/res/Configuration;->extraConfig:Lmiui/content/res/ExtraConfiguration;
+ 
+     invoke-virtual {v0, p1, p2}, Lmiui/content/res/ExtraConfiguration;->writeToParcel(Landroid/os/Parcel;I)V
+ 
      return-void
  
      :cond_0
