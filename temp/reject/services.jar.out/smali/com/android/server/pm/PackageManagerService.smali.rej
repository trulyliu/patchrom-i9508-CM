*** PackageManagerService.smali	2013-11-10 11:52:25.277671300 +0800
--- PackageManagerService.smali	2013-11-10 11:53:44.701673334 +0800
***************
*** 2806,2811 ****
  
      iput-object v2, v0, Lcom/android/server/pm/PackageManagerService;->mRequiredVerifierPackage:Ljava/lang/String;
  
      monitor-exit v41
      :try_end_9
      .catchall {:try_start_9 .. :try_end_9} :catchall_0
--- 2821,2828 ----
  
      iput-object v2, v0, Lcom/android/server/pm/PackageManagerService;->mRequiredVerifierPackage:Ljava/lang/String;
  
+     invoke-static {}, Lcom/android/server/pm/ExtraPackageManagerServices;->postScanPackages()V
+ 
      monitor-exit v41
      :try_end_9
      .catchall {:try_start_9 .. :try_end_9} :catchall_0
***************
*** 15445,15450 ****
      .end local v25           #i:I
      .end local v49           #renamed:Ljava/lang/String;
      :cond_18
      move-object/from16 v0, v45
  
      iget-object v3, v0, Lcom/android/server/pm/PackageSetting;->origPackage:Lcom/android/server/pm/PackageSettingBase;
--- 15496,15507 ----
      .end local v25           #i:I
      .end local v49           #renamed:Ljava/lang/String;
      :cond_18
+     move-object/from16 v0, p1
+ 
+     move-object/from16 v1, v45
+ 
+     invoke-static {v0, v1}, Lcom/android/server/pm/PackageManagerService$Injector;->addMiuiExtendFlags(Landroid/content/pm/PackageParser$Package;Lcom/android/server/pm/PackageSetting;)V
+ 
      move-object/from16 v0, v45
  
      iget-object v3, v0, Lcom/android/server/pm/PackageSetting;->origPackage:Lcom/android/server/pm/PackageSettingBase;
